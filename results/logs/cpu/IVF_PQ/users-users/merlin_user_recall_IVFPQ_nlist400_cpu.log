Fri 07 Jul 2023 08:13:17 AM UTC
Fri 07 Jul 2023 08:13:20 AM UTC
Fri 07 Jul 2023 08:13:30 AM UTC
------------------------------------------------- Recall task started! -------------------------------------------------
[DatasetDownload] File existed:/raid/whicks/proj_milvus/vectordb-benchmark/datasets/dataset_files/yoochoose.hdf5
[ClientMilvus] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {'batch': 1000},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection',
                       'other_fields': []},
 'index_params': {'index_type': 'IVF_PQ',
                  'index_param': {'nlist': 400, 'm': 64, 'nbits': 12}},
 'load_params': {},
 'search_params': {'timeout': 1800,
                   'top_k': [100],
                   'nq': [1000],
                   'search_param': {'nprobe': [5, 10, 20]}},
 'concurrent_params': {},
 'concurrent_tasks': []}
[ClientMilvus] Start preparing data
[ClientMilvus] Start inserting data
[ClientMilvus] Start building index
[ClientMilvus] Start loading data
[ClientMilvus] Insert time:195.832s, Index time:1711.949s, Load time:4.097s
[ClientMilvus] Data preparation completed
[ClientMilvus] Search recall:0.933, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 5}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.985, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 10}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.997, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 20}, 'timeout': 1800, 'metric_type': 'L2'}
------------------------------------------------ Recall task finished! -------------------------------------------------
Fri 07 Jul 2023 10:58:00 AM UTC
Fri 07 Jul 2023 10:58:00 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 5},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              21     0(0.00%)  |    7592    2310   10272    8470   10272  |    1.05    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              44     0(0.00%)  |    8637    7857    9100    8629    9069  |    1.15    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              67     0(0.00%)  |    8643    7678    9361    8587    9331  |    1.15    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              77     0(0.00%)  |    8362    2310   10272    8631   10272  |    1.13    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              77     0(0.00%)  |    8362    2310   10272    8631   10272  |    1.13    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 77,
 'rps': 1.1338,
 'total_time_s': 67.916,
 'avg_time_ms': 8362.7329,
 'min_time_ms': 2310.1217,
 'max_time_ms': 10272.7385,
 'median_time_ms': 8631.2881,
 'p95_time_ms': 9846.8264,
 'p99_time_ms': 10272.7171,
 'sum_all_rt_ms': 643930.4335}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 10:59:19 AM UTC
Fri 07 Jul 2023 10:59:19 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 10},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              10     0(0.00%)  |   15013   11855   18386   14756   18244  |    0.50    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              22     0(0.00%)  |   14100    8061   17709   15804   17705  |    0.60    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              33     0(0.00%)  |   17612   16261   17913   17768   17910  |    0.55    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              43     0(0.00%)  |   16011    8061   18386   17406   18187  |    0.56    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              43     0(0.00%)  |   16011    8061   18386   17406   18187  |    0.56    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 43,
 'rps': 0.5624,
 'total_time_s': 76.4599,
 'avg_time_ms': 16011.9285,
 'min_time_ms': 8061.0845,
 'max_time_ms': 18386.5895,
 'median_time_ms': 17406.2643,
 'p95_time_ms': 17878.0072,
 'p99_time_ms': 18187.8028,
 'sum_all_rt_ms': 688512.9257}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 11:00:47 AM UTC
Fri 07 Jul 2023 11:00:47 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 20},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               5     0(0.00%)  |   13041    5927   19894   13476   19796  |    0.25    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              10     0(0.00%)  |   31127   23787   36824   30988   36822  |    0.25    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              16     0(0.00%)  |   34721   33887   35803   34814   35761  |    0.30    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              21     0(0.00%)  |   34904   32588   36207   35033   36194  |    0.25    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              26     0(0.00%)  |   30185    5927   36824   34827   36814  |    0.28    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              26     0(0.00%)  |   30185    5927   36824   34827   36814  |    0.28    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 26,
 'rps': 0.2766,
 'total_time_s': 94.0075,
 'avg_time_ms': 30185.3864,
 'min_time_ms': 5927.5862,
 'max_time_ms': 36824.2766,
 'median_time_ms': 34827.6309,
 'p95_time_ms': 36773.7779,
 'p99_time_ms': 36814.3079,
 'sum_all_rt_ms': 784820.0467}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 11:02:33 AM UTC
Fri 07 Jul 2023 11:02:33 AM UTC
Fri 07 Jul 2023 11:02:40 AM UTC
