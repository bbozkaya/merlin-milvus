Thu 06 Jul 2023 09:47:27 PM UTC
Thu 06 Jul 2023 09:47:29 PM UTC
Thu 06 Jul 2023 09:47:39 PM UTC
------------------------------------------------- Recall task started! -------------------------------------------------
[DatasetDownload] File existed:/raid/whicks/proj_milvus/vectordb-benchmark/datasets/dataset_files/yoochoose.hdf5
[ClientMilvus] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {'batch': 1000},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection',
                       'other_fields': []},
 'index_params': {'index_type': 'IVF_PQ',
                  'index_param': {'nlist': 100, 'm': 64, 'nbits': 12}},
 'load_params': {},
 'search_params': {'timeout': 1800,
                   'top_k': [100],
                   'nq': [1000],
                   'search_param': {'nprobe': [5, 10, 20]}},
 'concurrent_params': {},
 'concurrent_tasks': []}
[ClientMilvus] Start preparing data
[ClientMilvus] Start inserting data
[ClientMilvus] Start building index
[ClientMilvus] Start loading data
[ClientMilvus] Insert time:202.282s, Index time:1718.089s, Load time:4.539s
[ClientMilvus] Data preparation completed
[ClientMilvus] Search recall:0.978, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 5}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.997, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 10}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.999, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 20}, 'timeout': 1800, 'metric_type': 'L2'}
------------------------------------------------ Recall task finished! -------------------------------------------------
Fri 07 Jul 2023 03:59:06 AM UTC
Fri 07 Jul 2023 03:59:06 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 5},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              14     0(0.00%)  |   22007    9271   27048   26572   27045  |    0.70    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              22     0(0.00%)  |   20502   13975   26742   20908   26558  |    0.40    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              30     0(0.00%)  |   26017   24877   26392   26148   26389  |    0.40    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              32     0(0.00%)  |   22873    9271   27048   26104   27041  |    0.38    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              32     0(0.00%)  |   22873    9271   27048   26104   27041  |    0.38    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 32,
 'rps': 0.3784,
 'total_time_s': 84.5587,
 'avg_time_ms': 22873.4071,
 'min_time_ms': 9271.1472,
 'max_time_ms': 27048.4636,
 'median_time_ms': 26104.8021,
 'p95_time_ms': 26971.083,
 'p99_time_ms': 27041.6794,
 'sum_all_rt_ms': 731949.0286}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 04:00:43 AM UTC
Fri 07 Jul 2023 04:00:43 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 10},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               2     0(0.00%)  |   35248   31986   38510   35248   38445  |    0.10    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              11     0(0.00%)  |   41887   26548   53355   42102   52933  |    0.45    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              15     0(0.00%)  |   31400   24824   38002   31387   37872  |    0.20    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              18     0(0.00%)  |   47474   42645   52387   47390   52288  |    0.15    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              21     0(0.00%)  |   41457   24824   53355   42102   53162  |    0.19    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              21     0(0.00%)  |   41457   24824   53355   42102   53162  |    0.19    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 21,
 'rps': 0.1911,
 'total_time_s': 109.8682,
 'avg_time_ms': 41457.3165,
 'min_time_ms': 24824.4262,
 'max_time_ms': 53355.5864,
 'median_time_ms': 42102.3362,
 'p95_time_ms': 52387.9798,
 'p99_time_ms': 53162.0651,
 'sum_all_rt_ms': 870603.6468}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 04:02:44 AM UTC
Fri 07 Jul 2023 04:02:44 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 20},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               1     0(0.00%)  |   19889   19889   19889   19889   19889  |    0.05    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               2     0(0.00%)  |   24492   24492   24492   24492   24492  |    0.05    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               2     0(0.00%)  |   24492   24492   24492   24492   24492  |    0.05    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               3     0(0.00%)  |   79166   79166   79166   79166   79166  |    0.05    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              10     0(0.00%)  |   91474   82374   94161   92783   94158  |    0.35    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              12     0(0.00%)  |   77928   19889   94161   89401   94156  |    0.11    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              12     0(0.00%)  |   77928   19889   94161   89401   94156  |    0.11    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 12,
 'rps': 0.1074,
 'total_time_s': 111.77,
 'avg_time_ms': 77928.1178,
 'min_time_ms': 19889.1933,
 'max_time_ms': 94161.8681,
 'median_time_ms': 89401.8964,
 'p95_time_ms': 94132.548,
 'p99_time_ms': 94156.0041,
 'sum_all_rt_ms': 935137.4141}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 04:04:47 AM UTC
Fri 07 Jul 2023 04:04:47 AM UTC
Fri 07 Jul 2023 04:04:56 AM UTC
