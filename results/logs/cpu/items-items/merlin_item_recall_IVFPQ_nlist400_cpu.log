------------------------------------------------- Recall task started! -------------------------------------------------
[DatasetDownload] File existed:/raid/whicks/proj_milvus/vectordb-benchmark/datasets/dataset_files/yoochoose.hdf5
[ClientMilvus] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {'batch': 100},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_item_collection',
                       'other_fields': []},
 'index_params': {'index_type': 'IVF_PQ',
                  'index_param': {'nlist': 400, 'm': 64, 'nbits': 12}},
 'load_params': {},
 'search_params': {'timeout': 1800,
                   'top_k': [100],
                   'nq': [1000],
                   'search_param': {'nprobe': [5, 10, 20]}},
 'concurrent_params': {},
 'concurrent_tasks': []}
[ClientMilvus] Start preparing data
[ClientMilvus] Start inserting data
[ClientMilvus] Start building index
[ClientMilvus] Start loading data
[ClientMilvus] Insert time:2.432s, Index time:31.149s, Load time:3.532s
[ClientMilvus] Data preparation completed
[ClientMilvus] Search recall:0.737, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 5}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.902, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 10}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.978, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 20}, 'timeout': 1800, 'metric_type': 'L2'}
------------------------------------------------ Recall task finished! -------------------------------------------------
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_item_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 5},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             208     0(0.00%)  |     936     291    1291     957    1250  |   10.40    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             415     0(0.00%)  |     981     267    1220    1056    1199  |   10.35    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             621     0(0.00%)  |     950     315    1184     970    1157  |   10.30    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             631     0(0.00%)  |     954     267    1291     976    1240  |   10.44    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             631     0(0.00%)  |     954     267    1291     976    1240  |   10.44    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 631,
 'rps': 10.4368,
 'total_time_s': 60.459,
 'avg_time_ms': 954.5359,
 'min_time_ms': 267.6085,
 'max_time_ms': 1291.3811,
 'median_time_ms': 976.5769,
 'p95_time_ms': 1163.8257,
 'p99_time_ms': 1240.3367,
 'sum_all_rt_ms': 602312.1741}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_item_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 10},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             115     0(0.00%)  |    1688     670    2666    1709    2403  |    5.75    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             237     0(0.00%)  |    1629     407    2224    1715    2123  |    6.10    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             358     0(0.00%)  |    1604     412    2189    1677    2164  |    6.05    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             368     0(0.00%)  |    1642     407    2666    1702    2232  |    6.06    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             368     0(0.00%)  |    1642     407    2666    1702    2232  |    6.06    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 368,
 'rps': 6.0636,
 'total_time_s': 60.6899,
 'avg_time_ms': 1642.2554,
 'min_time_ms': 407.3585,
 'max_time_ms': 2666.2514,
 'median_time_ms': 1702.2205,
 'p95_time_ms': 2084.3423,
 'p99_time_ms': 2232.8687,
 'sum_all_rt_ms': 604350.0011}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_item_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 20},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              51     0(0.00%)  |    3440     862    5023    3393    4911  |    2.55    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             111     0(0.00%)  |    3317    1195    5369    3337    5105  |    3.00    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             168     0(0.00%)  |    3475    1142    4631    3707    4556  |    2.85    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             179     0(0.00%)  |    3387     862    5369    3493    4944  |    2.93    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                             179     0(0.00%)  |    3387     862    5369    3493    4944  |    2.93    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 179,
 'rps': 2.9271,
 'total_time_s': 61.1533,
 'avg_time_ms': 3387.4215,
 'min_time_ms': 862.4852,
 'max_time_ms': 5369.8496,
 'median_time_ms': 3493.9068,
 'p95_time_ms': 4750.1967,
 'p99_time_ms': 4944.7804,
 'sum_all_rt_ms': 606348.457}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
