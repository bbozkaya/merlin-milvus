Fri 07 Jul 2023 04:04:56 AM UTC
Fri 07 Jul 2023 04:04:59 AM UTC
Fri 07 Jul 2023 04:05:09 AM UTC
------------------------------------------------- Recall task started! -------------------------------------------------
[DatasetDownload] File existed:/raid/whicks/proj_milvus/vectordb-benchmark/datasets/dataset_files/yoochoose.hdf5
[ClientMilvus] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {'batch': 1000},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection',
                       'other_fields': []},
 'index_params': {'index_type': 'IVF_PQ',
                  'index_param': {'nlist': 200, 'm': 64, 'nbits': 12}},
 'load_params': {},
 'search_params': {'timeout': 1800,
                   'top_k': [100],
                   'nq': [1000],
                   'search_param': {'nprobe': [5, 10, 20]}},
 'concurrent_params': {},
 'concurrent_tasks': []}
[ClientMilvus] Start preparing data
[ClientMilvus] Start inserting data
[ClientMilvus] Start building index
[ClientMilvus] Start loading data
[ClientMilvus] Insert time:203.804s, Index time:1815.262s, Load time:5.046s
[ClientMilvus] Data preparation completed
[ClientMilvus] Search recall:0.96, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 5}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.993, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 10}, 'timeout': 1800, 'metric_type': 'L2'}
[ClientMilvus] Search recall:0.999, search params:{'top_k': 100, 'nq': 1000, 'search_param': {'nprobe': 20}, 'timeout': 1800, 'metric_type': 'L2'}
------------------------------------------------ Recall task finished! -------------------------------------------------
Fri 07 Jul 2023 08:07:59 AM UTC
Fri 07 Jul 2023 08:07:59 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 5},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              13     0(0.00%)  |   12412    3751   14888   14787   14888  |    0.65    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              26     0(0.00%)  |   12529    6496   15480   13927   15412  |    0.65    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              40     0(0.00%)  |   14864   14587   15134   14871   15132  |    0.70    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              50     0(0.00%)  |   13577    3751   15480   14726   15310  |    0.68    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              50     0(0.00%)  |   13577    3751   15480   14726   15310  |    0.68    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 50,
 'rps': 0.6763,
 'total_time_s': 73.93,
 'avg_time_ms': 13577.4517,
 'min_time_ms': 3751.2055,
 'max_time_ms': 15480.1558,
 'median_time_ms': 14726.2533,
 'p95_time_ms': 15109.7198,
 'p99_time_ms': 15310.736,
 'sum_all_rt_ms': 678872.5873}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 08:09:25 AM UTC
Fri 07 Jul 2023 08:09:25 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 10},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               2     0(0.00%)  |    6538    6345    6732    6538    6728  |    0.10    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              13     0(0.00%)  |   24706   18715   29898   23941   29891  |    0.55    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              20     0(0.00%)  |   25909   18975   29922   27135   29918  |    0.35    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              26     0(0.00%)  |   29333   28823   29735   29364   29732  |    0.30    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              30     0(0.00%)  |   25286    6345   29922   27886   29915  |    0.34    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              30     0(0.00%)  |   25286    6345   29922   27886   29915  |    0.34    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 30,
 'rps': 0.34,
 'total_time_s': 88.2453,
 'avg_time_ms': 25286.7247,
 'min_time_ms': 6345.3843,
 'max_time_ms': 29922.6864,
 'median_time_ms': 27886.2173,
 'p95_time_ms': 29876.3763,
 'p99_time_ms': 29915.5604,
 'sum_all_rt_ms': 758601.7399}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 08:11:05 AM UTC
Fri 07 Jul 2023 08:11:05 AM UTC
---------------------------------------------- Concurrency task started! -----------------------------------------------
[MultiProcessConcurrent] Parameters used: 
{'database_params': {'metric_type': 'L2', 'dim': 64, 'max_length': 256},
 'insert_params': {},
 'connection_params': {'secure': False},
 'collection_params': {'collection_name': 'merlin_user_collection'},
 'index_params': {},
 'load_params': {},
 'search_params': {},
 'concurrent_params': {'concurrent_number': 10,
                       'during_time': 60,
                       'warm_time': 0,
                       'interval': 20},
 'concurrent_tasks': [{'type': 'query',
                       'weight': 0,
                       'params': {'expr': 'id in [1, 10, 100, 1000]',
                                  'timeout': 1800}},
                      {'type': 'search',
                       'weight': 1,
                       'params': {'nq': 1000,
                                  'top_k': 100,
                                  'search_param': {'nprobe': 20},
                                  'timeout': 1800}}]}
[MultiProcessConcurrent] Get multiprocessing start method: forkserver
[MultiProcessConcurrent] Start initializing the concurrent pool
[MultiProcessConcurrent] Start waiting for 10 processes ready: 2.0s
[MultiProcessConcurrent] Start concurrent pool
[ParserResult] Starting sync report, interval:20s, intermediate state results are available for reference
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
---------------------------------------------------------------------------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                               1     0(0.00%)  |   35563   35563   35563   35563   35563  |    0.05    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              10     0(0.00%)  |   53457   45956   56972   54815   56971  |    0.45    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              14     0(0.00%)  |   26410   22969   29412   26628   29357  |    0.20    0.00
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              17     0(0.00%)  |   36508   31709   40930   36886   40849  |    0.15    0.00
[MultiProcessConcurrent] End concurrent pool
------------------------------------------------- Print final status ------------------------------------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              20     0(0.00%)  |   44311   22969   56972   47788   56969  |    0.18    0.00
------------------------ Print the status without start and end warmup time:0s as a reference -----------------------
 Name                            # reqs      # fails  |     Avg     Min     Max  Median    TP99  |   req/s failures/s
 search                              20     0(0.00%)  |   44311   22969   56972   47788   56969  |    0.18    0.00
[ParserResult] Completed sync report
[MultiProcessConcurrent] Summary of overall results: 
{'reqs': 20,
 'rps': 0.1771,
 'total_time_s': 112.9376,
 'avg_time_ms': 44311.4773,
 'min_time_ms': 22969.5144,
 'max_time_ms': 56972.3357,
 'median_time_ms': 47788.6483,
 'p95_time_ms': 56959.3811,
 'p99_time_ms': 56969.7448,
 'sum_all_rt_ms': 886229.5467}
---------------------------------------------- Concurrency task finished! ----------------------------------------------
Fri 07 Jul 2023 08:13:09 AM UTC
Fri 07 Jul 2023 08:13:09 AM UTC
Fri 07 Jul 2023 08:13:17 AM UTC
